- name: 'System > Apps > NVM: Install'
  become: true
  become_user: '{{ real_username }}'
  ansible.builtin.shell:
    cmd: curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash
    creates: '/home/{{ real_username }}/.nvm/nvm.sh'
  tags: ['system', 'dev']

- name: 'System > Apps > NVM: Install node versions'
  become: true
  become_user: '{{ real_username }}'
  ansible.builtin.shell: >
    /bin/bash -c "source ~/.nvm/nvm.sh && nvm install 0.10 && nvm alias default 0.10"
    creates=/home/{{ ansible_user_id }}/.nvm/alias
  tags: ['system', 'dev']

# - name: 'System > Apps > NVM: Set default node version'
#   become: true
#   become_user: '{{ real_username }}'
#   ansible.builtin.shell:
#     cmd: nvm alias default 16.13.0
#     creates: '/home/{{ real_username }}/.nvm/alias'
#   tags: ['system', 'dev']
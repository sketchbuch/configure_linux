# Loads vars from the vars folder for this role

- include_vars: 'all.yml'
  tags: ['always']

- block:
  - import_tasks: setup/facts.yml
  - import_tasks: setup/checks.yml
  - import_tasks: setup/vars.yml

  - name: 'Tasks by distro'
    include_tasks: "{{ item }}"
    tags: ['distro_tasks']
    with_first_found:
      - 'distro/{{ ansible_distribution|lower }}-{{ ansible_distribution_major_version}}.yml'
      - 'distro/{{ ansible_distribution|lower }}.yml'
  
  rescue:
    - set_fact: all_task_failed=true
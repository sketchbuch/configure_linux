- block:
    - name: "Include vars for {{ distro_pretty }}"
      include_vars: "{{ distro }}.yaml"
      tags: ["always", "vars"]
      when: is_ubuntu or is_fedora

    - name: "Include tasks for {{ distro_pretty }}"
      block:
        - import_tasks: "distro/common.yaml"
        - import_tasks: "distro/fedora.yaml"
      tags: ["distro_tasks"]
      when: is_fedora

    - name: "Include tasks for {{ distro_pretty }}"
      block:
        - import_tasks: "distro/common.yaml"
        - import_tasks: "distro/ubuntu.yaml"
      tags: ["distro_tasks"]
      when: is_ubuntu

    - import_tasks: "system/fonts/firacode.yaml"
    - import_tasks: "system/fonts/inconsolata.yaml"
    - import_tasks: "system/fonts/mscorefonts.yaml"
    - import_tasks: "system/fonts/sourcecodepro.yaml"
    - import_tasks: "system/terminal.yaml"

  rescue:
    - set_fact: all_task_failed=true

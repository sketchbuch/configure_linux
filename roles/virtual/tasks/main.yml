# Loads vars from the vars folder for this role

- name: 'Include {{ distro | capitalize  }} vars'
  include_vars: '{{ distro }}.yml'
  tags: ['always', 'vars']

- block:
  - import_tasks: setup/home_folder.yml
  - import_tasks: setup/profile.yml

  - name: 'Include tasks for: {{ distro | capitalize }}'
    include_tasks: "{{ item }}"
    tags: ['distro_tasks']
    with_first_found:
      - 'distro/{{ distro }}-{{ distro_major_version}}.yml'
      - 'distro/{{ distro }}.yml'
  
  rescue:
    - set_fact: virtual_task_failed=true
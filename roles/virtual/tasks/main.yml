- block:
  - name: 'Include vars for {{ distro_pretty }}'
    include_vars: '{{ distro }}.yml'
    tags: ['always', 'vars']

  - name: 'Include tasks for {{ distro_pretty }}'
    include_vars: 'distro/{{ distro }}.yml'
    tags: ['always', 'vars']
  
  - name: 'Include tasks for Gnome'
    import_tasks: 'desktop/gnome.yml'
    tags: ['gnome']
    when: is_gnome

  - import_tasks: 'users/profile.yml'
  
  rescue:
    - set_fact: virtual_task_failed=true
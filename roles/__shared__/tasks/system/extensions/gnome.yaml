- import_tasks: "gnome_prep.yaml"
  when: is_gnome

- name: "Add Gnome Extensions"
  include_tasks: "gnome_extensions.yaml"
  loop: "{{ gnome_extensions }}"
  loop_control:
    loop_var: extension
  when: is_gnome

- name: 'System > Extensions > Gnome Extensions: "desktop-icons-ng-ding" - Disable'
  ansible.builtin.command:
    # cmd: "gnome-extensions disable ding@rastersoft.com"
    cmd: "gnome-shell-extension-tool --disable-extension ding@rastersoft.com"
  become: true
  become_user: "{{ profile_username }}"
  tags: ["system", "desktop", "gnome", "extensions"]
  when:
    - is_gnome
    - (distro_major_version | int) >= 24

- import_tasks: "gnome_cleanup.yaml"
  when: is_gnome

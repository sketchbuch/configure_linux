# Disable screen locking in VMs

- name: 'Disable Screensaver'
  become: true
  become_user: '{{real_username}}'
  dconf:
    key: "/org/gnome/desktop/screensaver/lock-enabled"
    state: present
    value: "false"
  when: ansible_virtualization_role == 'guest'

- name: 'Disable Screensaver idle activation'
  become: true
  become_user: '{{real_username}}'
  dconf:
    key: "/org/gnome/desktop/screensaver/idle-activation-enabled"
    state: present
    value: "false"
  when: ansible_virtualization_role == 'guest'

- name: 'Disable lock screen timeout'
  become: true
  become_user: '{{real_username}}'
  dconf:
    key: '/org/gnome/desktop/session/lock-delay'
    state: present
    value: "uint32 0"
  when: ansible_virtualization_role == 'guest'

- name: 'Disable idle timeout'
  become: true
  become_user: '{{real_username}}'
  dconf:
    key: '/org/gnome/desktop/session/idle-delay'
    state: present
    value: "uint32 0"
  when: ansible_virtualization_role == 'guest'